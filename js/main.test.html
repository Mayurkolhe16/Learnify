<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Validation Tests - Learnify</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #4F46E5; }
        .test-suite {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            padding: 10px;
            margin: 5px 0;
            border-left: 4px solid #ccc;
        }
        .test-case.pass {
            background: #d1fae5;
            border-color: #10B981;
        }
        .test-case.fail {
            background: #fee2e2;
            border-color: #ef4444;
        }
        .summary {
            font-weight: bold;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }
        .summary.all-pass {
            background: #d1fae5;
            color: #065f46;
        }
        .summary.has-fail {
            background: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <h1>Form Validation Helper Tests</h1>
    <div id="test-results"></div>

    <script src="main.js"></script>
    <script>
        // Simple test runner
        const results = [];
        
        function test(description, fn) {
            try {
                fn();
                results.push({ description, passed: true });
            } catch (error) {
                results.push({ description, passed: false, error: error.message });
            }
        }

        function assert(condition, message) {
            if (!condition) {
                throw new Error(message || 'Assertion failed');
            }
        }

        function assertEqual(actual, expected, message) {
            if (actual !== expected) {
                throw new Error(message || `Expected ${expected} but got ${actual}`);
            }
        }

        // Test Suite: Email Validation
        test('isValidEmail: accepts valid email', () => {
            assert(FormValidation.isValidEmail('user@example.com'), 'Should accept valid email');
        });

        test('isValidEmail: accepts email with subdomain', () => {
            assert(FormValidation.isValidEmail('user@mail.example.com'), 'Should accept email with subdomain');
        });

        test('isValidEmail: rejects email without @', () => {
            assert(!FormValidation.isValidEmail('userexample.com'), 'Should reject email without @');
        });

        test('isValidEmail: rejects email without domain', () => {
            assert(!FormValidation.isValidEmail('user@'), 'Should reject email without domain');
        });

        test('isValidEmail: rejects empty string', () => {
            assert(!FormValidation.isValidEmail(''), 'Should reject empty string');
        });

        test('isValidEmail: rejects null', () => {
            assert(!FormValidation.isValidEmail(null), 'Should reject null');
        });

        test('isValidEmail: rejects undefined', () => {
            assert(!FormValidation.isValidEmail(undefined), 'Should reject undefined');
        });

        test('isValidEmail: handles whitespace', () => {
            assert(FormValidation.isValidEmail('  user@example.com  '), 'Should trim and accept valid email');
        });

        // Test Suite: Password Validation
        test('isValidPassword: accepts password with 8 characters', () => {
            assert(FormValidation.isValidPassword('password'), 'Should accept 8 character password');
        });

        test('isValidPassword: accepts password longer than 8 characters', () => {
            assert(FormValidation.isValidPassword('verylongpassword123'), 'Should accept long password');
        });

        test('isValidPassword: rejects password shorter than 8 characters', () => {
            assert(!FormValidation.isValidPassword('pass'), 'Should reject short password');
        });

        test('isValidPassword: rejects empty string', () => {
            assert(!FormValidation.isValidPassword(''), 'Should reject empty string');
        });

        test('isValidPassword: rejects null', () => {
            assert(!FormValidation.isValidPassword(null), 'Should reject null');
        });

        test('isValidPassword: rejects undefined', () => {
            assert(!FormValidation.isValidPassword(undefined), 'Should reject undefined');
        });

        // Test Suite: Required Field Validation
        test('isRequired: accepts non-empty string', () => {
            assert(FormValidation.isRequired('value'), 'Should accept non-empty string');
        });

        test('isRequired: rejects empty string', () => {
            assert(!FormValidation.isRequired(''), 'Should reject empty string');
        });

        test('isRequired: rejects whitespace only', () => {
            assert(!FormValidation.isRequired('   '), 'Should reject whitespace only');
        });

        test('isRequired: rejects null', () => {
            assert(!FormValidation.isRequired(null), 'Should reject null');
        });

        test('isRequired: rejects undefined', () => {
            assert(!FormValidation.isRequired(undefined), 'Should reject undefined');
        });

        test('isRequired: accepts number zero', () => {
            assert(FormValidation.isRequired(0), 'Should accept number zero');
        });

        // Test Suite: Minimum Length Validation
        test('hasMinLength: accepts string meeting minimum', () => {
            assert(FormValidation.hasMinLength('hello', 5), 'Should accept string meeting minimum');
        });

        test('hasMinLength: accepts string exceeding minimum', () => {
            assert(FormValidation.hasMinLength('hello world', 5), 'Should accept string exceeding minimum');
        });

        test('hasMinLength: rejects string below minimum', () => {
            assert(!FormValidation.hasMinLength('hi', 5), 'Should reject string below minimum');
        });

        test('hasMinLength: handles whitespace trimming', () => {
            assert(FormValidation.hasMinLength('  hello  ', 5), 'Should trim and validate');
        });

        // Test Suite: Maximum Length Validation
        test('hasMaxLength: accepts string within maximum', () => {
            assert(FormValidation.hasMaxLength('hello', 10), 'Should accept string within maximum');
        });

        test('hasMaxLength: accepts string at maximum', () => {
            assert(FormValidation.hasMaxLength('hello', 5), 'Should accept string at maximum');
        });

        test('hasMaxLength: rejects string exceeding maximum', () => {
            assert(!FormValidation.hasMaxLength('hello world', 5), 'Should reject string exceeding maximum');
        });

        // Test Suite: Values Match Validation
        test('valuesMatch: returns true for matching strings', () => {
            assert(FormValidation.valuesMatch('password', 'password'), 'Should match identical strings');
        });

        test('valuesMatch: returns false for different strings', () => {
            assert(!FormValidation.valuesMatch('password', 'different'), 'Should not match different strings');
        });

        test('valuesMatch: is case sensitive', () => {
            assert(!FormValidation.valuesMatch('Password', 'password'), 'Should be case sensitive');
        });

        test('valuesMatch: handles empty strings', () => {
            assert(FormValidation.valuesMatch('', ''), 'Should match empty strings');
        });

        // Display results
        const resultsDiv = document.getElementById('test-results');
        const passed = results.filter(r => r.passed).length;
        const failed = results.filter(r => !r.passed).length;

        results.forEach(result => {
            const testDiv = document.createElement('div');
            testDiv.className = `test-case ${result.passed ? 'pass' : 'fail'}`;
            testDiv.innerHTML = `
                <strong>${result.passed ? '✓' : '✗'}</strong> ${result.description}
                ${result.error ? `<br><small style="color: #991b1b;">Error: ${result.error}</small>` : ''}
            `;
            resultsDiv.appendChild(testDiv);
        });

        const summary = document.createElement('div');
        summary.className = `summary ${failed === 0 ? 'all-pass' : 'has-fail'}`;
        summary.textContent = `Tests: ${passed} passed, ${failed} failed, ${results.length} total`;
        resultsDiv.appendChild(summary);

        console.log(`Test Results: ${passed}/${results.length} passed`);
    </script>
</body>
</html>
